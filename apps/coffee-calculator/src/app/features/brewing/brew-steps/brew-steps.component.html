<div class="min-h-80">
  <mat-tab-group>
    @for (tab of listTabs(); track $index) {
    <mat-tab label="{{ tab.label }}">
      <ul>
        @for (step of tab.list(); track $index) {
        <li>
          @if (step.mode === 'view') {
          <span (click)="handleEdit(tab.list, $index)">{{ step.value }}</span>
          } @else {
          <mat-form-field class="w-full">
            <textarea
              matInput
              [value]="step.value"
              class="min-h-24"
              (blur)="handleStepBlur(tab.list, $index, $event)"
            ></textarea>
            <mat-hint>Touch outside to confirm</mat-hint>
          </mat-form-field>
          }
        </li>
        }
      </ul>
    </mat-tab>
    }
    <!-- @if (pre().length) {
    <mat-tab label="Get Ready">
      <ul>
        @for (step of pre(); track $index) {
        <li>
          @if (step.mode === 'view') {
          <span (click)="handleEdit(pre, $index)">{{ step.value }}</span>
          } @else {
          <mat-form-field class="w-full">
            <textarea matInput [value]="step.value" class="min-h-24"></textarea>
            <mat-hint>Touch outside to confirm</mat-hint>
          </mat-form-field>
          }
        </li>
        }
      </ul>
    </mat-tab>
    }
    <mat-tab label="Steps">
      <p>
        <small><i>The instructions are for 1 cup</i></small>
      </p>
      <ol>
        @for (step of pre(); track $index) {
        <li>
          @if (step.mode === 'view') {
          <span (click)="handleEdit(pre, $index)">{{ step.value }}</span>
          } @else {
          <mat-form-field class="w-full">
            <textarea matInput [value]="step.value" class="min-h-24"></textarea>
            <mat-hint>Touch outside to confirm</mat-hint>
          </mat-form-field>
          }
        </li>
        }
      </ol>
    </mat-tab>
    @if (tips()) {
    <mat-tab label="Pro Tips">
      <ul>
        @for (step of pre(); track $index) {
        <li>
          @if (step.mode === 'view') {
          <span (click)="handleEdit(pre, $index)">{{ step.value }}</span>
          } @else {
          <mat-form-field class="w-full">
            <textarea matInput [value]="step.value" class="min-h-24"></textarea>
            <mat-hint>Touch outside to confirm</mat-hint>
          </mat-form-field>
          }
        </li>
        }
      </ul>
    </mat-tab>
    } -->
    @if (tutorialUrl()) {
    <mat-tab label="Tutorial">
      <div class="flex flex-row justify-center w-full">
        <iframe
          [width]="isMediumLayout() ? 900 : '100%'"
          [height]="isMediumLayout() ? 506 : 315"
          [src]="tutorialUrl()"
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen
        ></iframe>
      </div>
    </mat-tab>
    }
  </mat-tab-group>
</div>
